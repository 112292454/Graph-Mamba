# DD数据集对比实验配置

## 🎯 实验目的

验证TokenizerGraph导出的标准化数据与原始TUDataset数据在训练效果上的一致性，确保数据转换过程没有引入偏差。

## 📁 配置文件说明

### 1. `dd-original-GatedGCN.yaml`
- **数据源**: 原始PyTorch Geometric TUDataset
- **特征**: 89维原始特征向量
- **模型**: GatedGCN
- **用途**: 基线对比实验

### 2. `dd-exported-GatedGCN.yaml` 
- **数据源**: TokenizerGraph导出的标准化数据
- **特征**: 1维token化特征
- **模型**: GatedGCN (相同架构)
- **用途**: 验证导出数据效果

## ⚖️ 公平对比保证

两个配置文件**除数据源外完全相同**：

| 参数类别 | 数值 | 说明 |
|----------|------|------|
| **模型架构** | GatedGCN, 4层, 64维 | 完全相同 |
| **训练设置** | batch_size=32, lr=0.001, epochs=200 | 完全相同 |
| **优化器** | AdamW, weight_decay=1e-4 | 完全相同 |
| **随机种子** | 42 | 确保可重现性 |
| **评估指标** | accuracy | 完全相同 |

## 🚀 运行实验

### 方法一：单个实验

```bash
cd /home/gzy/py/Graph-Mamba

# 运行原始数据实验
python main.py --cfg configs/DD_comparison/dd-original-GatedGCN.yaml

# 运行导出数据实验  
python main.py --cfg configs/DD_comparison/dd-exported-GatedGCN.yaml
```

### 方法二：批量对比实验

```bash
cd /home/gzy/py/Graph-Mamba

# 使用提供的批量实验脚本
python run_dd_comparison.py
```

## 📊 预期结果

### 如果导出数据完全正确：
- ✅ **准确率差异** < 1%
- ✅ **训练曲线相似**  
- ✅ **收敛速度相当**
- ✅ **最终loss相近**

### 如果存在数据问题：
- ❌ **准确率差异** > 5%
- ❌ **训练曲线不同**
- ❌ **收敛行为异常**

## 📝 实验记录

### 建议记录的指标：
- **最佳验证准确率**
- **最佳测试准确率**  
- **训练时间**
- **收敛轮数**
- **内存使用**

### 结果对比表格模板：

| 指标 | 原始数据 | 导出数据 | 差异 |
|------|----------|----------|------|
| 测试准确率 | __%  | __%  | ±_% |
| 验证准确率 | __%  | __%  | ±_% |
| 训练时间 | __分钟 | __分钟 | ±__分钟 |
| 内存峰值 | __GB | __GB | ±__GB |

## 🔧 故障排除

### 常见问题：

**1. 导出数据加载失败**
```
FileNotFoundError: exported data file not found
```
**解决**: 检查`exported_data_dir`路径是否正确

**2. 特征维度不匹配**  
```
RuntimeError: tensor shape mismatch
```
**解决**: 确认使用了LinearNode编码器

**3. CUDA内存不足**
```
RuntimeError: CUDA out of memory
```
**解决**: 减小batch_size或使用CPU模式

### 调试技巧：

1. **启用详细日志**: 添加`--verbose`参数
2. **检查数据加载**: 在配置中临时减小数据集大小
3. **验证数据一致性**: 运行我们之前的验证脚本

## 🎯 成功标准

实验成功的标准：
- ✅ 两个实验都能正常完成训练
- ✅ 最终测试准确率差异 < 2%  
- ✅ 训练过程稳定，无异常
- ✅ 资源使用合理

达到以上标准即可确认：**导出数据与原始数据等价，可安全用于后续模型对比实验**。
