# 使用导出数据的配置文件模板

## 使用说明

只需在任何现有配置文件中添加以下两行即可使用您的导出数据：

```yaml
prep:
  use_exported_data: True                    # 启用导出数据
  exported_data_dir: '/path/to/exported/'   # 您的导出数据目录路径
```

## 完整配置文件示例

### 1. ZINC数据集 (分子回归)

```yaml
# configs/Mamba/zinc-exported-EX.yaml
out_dir: results
metric_best: mae
metric_agg: argmin
wandb:
  use: False  # 或您的wandb配置
dataset:
  format: PyG-ZINC
  name: subset
  task: graph
  task_type: regression
  node_encoder: True
  node_encoder_name: LinearNode  # 导出数据的特征已经是token，用Linear编码器
  edge_encoder: True
  edge_encoder_name: LinearEdge
prep:
  use_exported_data: True                    # 🔥 关键：启用导出数据
  exported_data_dir: '/path/to/your/exported/'  # 🔥 关键：您的导出数据目录
train:
  mode: custom
  batch_size: 32
  eval_period: 1
model:
  type: GPSModel
  loss_fun: l1
  graph_pooling: mean
gt:
  layer_type: CustomGatedGCN+Mamba_Hybrid_Degree_Noise  # Graph-Mamba
  layers: 4
  n_heads: 4
  dim_hidden: 64
gnn:
  dim_inner: 64
  batchnorm: True
  act: relu
  dropout: 0.0
optim:
  clip_grad_norm: True
  optimizer: adamW
  weight_decay: 0.01
  base_lr: 0.001
  max_epoch: 200
  scheduler: cosine_with_warmup
  num_warmup_epochs: 10
seed: 42
```

### 2. MOLHIV数据集 (分子二分类, ROC-AUC评估)

```yaml
# configs/Mamba/molhiv-exported-EX.yaml
out_dir: results
metric_best: rocauc  # 重要：使用ROC-AUC评估
wandb:
  use: False
dataset:
  format: OGB
  name: ogbg-molhiv
  task: graph
  task_type: classification_binary
  node_encoder: True
  node_encoder_name: LinearNode
  edge_encoder: True
  edge_encoder_name: LinearEdge
prep:
  use_exported_data: True                    # 🔥 关键配置
  exported_data_dir: '/path/to/your/exported/'  # 🔥 关键配置
train:
  mode: custom
  batch_size: 32
model:
  type: GPSModel
  loss_fun: cross_entropy
gt:
  layer_type: CustomGatedGCN+Mamba_Hybrid_Degree_Noise
  layers: 4
  dim_hidden: 64
gnn:
  dim_inner: 64
optim:
  base_lr: 0.001
  max_epoch: 100
seed: 42
```

### 3. PROTEINS数据集 (TU图分类)

```yaml
# configs/Mamba/proteins-exported-EX.yaml
out_dir: results
metric_best: accuracy
dataset:
  format: PyG-TUDataset
  name: PROTEINS
  task: graph
  task_type: classification
  node_encoder: True
  node_encoder_name: LinearNode
  edge_encoder: True
  edge_encoder_name: LinearEdge
prep:
  use_exported_data: True
  exported_data_dir: '/path/to/your/exported/'
train:
  mode: custom
  batch_size: 32
model:
  type: GPSModel
  loss_fun: cross_entropy
gt:
  layer_type: CustomGatedGCN+Mamba_Hybrid_Degree_Noise
  layers: 4
  dim_hidden: 64
gnn:
  dim_inner: 64
optim:
  base_lr: 0.001
  max_epoch: 100
seed: 42
```

### 4. COLORS-3数据集 (11分类)

```yaml
# configs/Mamba/colors3-exported-EX.yaml
out_dir: results
metric_best: accuracy
dataset:
  format: PyG-TUDataset
  name: colors3
  task: graph
  task_type: classification
  node_encoder: True
  node_encoder_name: LinearNode
  edge_encoder: True
  edge_encoder_name: LinearEdge
prep:
  use_exported_data: True
  exported_data_dir: '/path/to/your/exported/'
# ... 其余配置类似
```

### 5. COIL-DEL数据集 (100分类)

```yaml
# configs/Mamba/coildel-exported-EX.yaml
out_dir: results  
metric_best: accuracy
dataset:
  format: PyG-TUDataset
  name: coildel
  task: graph
  task_type: classification
  node_encoder: True
  node_encoder_name: LinearNode
  edge_encoder: True  
  edge_encoder_name: LinearEdge
prep:
  use_exported_data: True
  exported_data_dir: '/path/to/your/exported/'
# ... 其余配置类似
```

### 6. Peptides-func数据集 (多标签分类)

```yaml
# configs/Mamba/peptides-func-exported-EX.yaml
out_dir: results
metric_best: ap  # 多标签分类使用平均精度
dataset:
  format: OGB
  name: peptides-functional
  task: graph
  task_type: classification_multilabel
  node_encoder: True
  node_encoder_name: LinearNode
  edge_encoder: True
  edge_encoder_name: LinearEdge
prep:
  use_exported_data: True
  exported_data_dir: '/path/to/your/exported/'
train:
  mode: custom
  batch_size: 16  # 多标签任务可能需要较小批量
model:
  type: GPSModel
  loss_fun: cross_entropy  # 多标签分类
gt:
  layer_type: CustomGatedGCN+Mamba_Hybrid_Degree_Noise
  layers: 6
  dim_hidden: 96
gnn:
  dim_inner: 96
optim:
  base_lr: 0.001
  max_epoch: 200
seed: 42
```

### 7. Peptides-struct数据集 (多目标回归)

```yaml
# configs/Mamba/peptides-struct-exported-EX.yaml
out_dir: results
metric_best: mae  # 多目标回归使用MAE
dataset:
  format: OGB
  name: peptides-structural
  task: graph
  task_type: regression
  node_encoder: True
  node_encoder_name: LinearNode
  edge_encoder: True
  edge_encoder_name: LinearEdge
prep:
  use_exported_data: True
  exported_data_dir: '/path/to/your/exported/'
train:
  mode: custom
  batch_size: 16
model:
  type: GPSModel
  loss_fun: l1  # 回归任务
gt:
  layer_type: CustomGatedGCN+Mamba_Hybrid_Degree_Noise
  layers: 6
  dim_hidden: 96
gnn:
  dim_inner: 96
optim:
  base_lr: 0.001
  max_epoch: 200
seed: 42
```

### 8. QM9数据集 (多属性回归) - 特殊格式

```yaml
# configs/Mamba/qm9-exported-EX.yaml
out_dir: results
metric_best: mae
metric_agg: argmin
dataset:
  format: Exported-QM9  # 🔥 QM9使用特殊格式标识
  name: qm9
  task: graph
  task_type: regression
  node_encoder: True
  node_encoder_name: LinearNode
  edge_encoder: True
  edge_encoder_name: LinearEdge
prep:
  use_exported_data: True
  exported_data_dir: '/path/to/your/exported/'
train:
  mode: custom
  batch_size: 32
model:
  type: GPSModel
  loss_fun: l1
gt:
  layer_type: CustomGatedGCN+Mamba_Hybrid_Degree_Noise
  layers: 4
  dim_hidden: 64
gnn:
  dim_inner: 64
optim:
  base_lr: 0.001
  max_epoch: 200
seed: 42
```

## 不同模型的配置选项

### Graph-Mamba (推荐)
```yaml
gt:
  layer_type: CustomGatedGCN+Mamba_Hybrid_Degree_Noise          # 主推模型
  # layer_type: CustomGatedGCN+Mamba_Hybrid_Degree_Noise_Bucket  # 大图版本
```

### GraphGPS (基线对比)
```yaml
gt:
  layer_type: CustomGatedGCN+Transformer  # GPS基线
```

### 纯GCN (基线对比)
```yaml
model:
  type: custom_gnn
gnn:
  layer_type: gatedgcnconv  # 或 gineconv
```

## 运行命令示例

```bash
# 设置导出数据目录路径（根据您的实际路径修改）
export EXPORTED_DATA_DIR="/path/to/your/exported"

# ZINC + Graph-Mamba
python main.py --cfg configs/Mamba/zinc-exported-EX.yaml \
    prep.exported_data_dir $EXPORTED_DATA_DIR

# MOLHIV + GraphGPS 
python main.py --cfg configs/GPS/molhiv-exported-GPS.yaml \
    prep.exported_data_dir $EXPORTED_DATA_DIR

# PROTEINS + Graph-Mamba
python main.py --cfg configs/Mamba/proteins-exported-EX.yaml \
    prep.exported_data_dir $EXPORTED_DATA_DIR

# Peptides-func + Graph-Mamba
python main.py --cfg configs/Mamba/peptides-func-exported-EX.yaml \
    prep.exported_data_dir $EXPORTED_DATA_DIR
```

## 支持的数据集完整列表

根据您的导出数据文档，以下数据集完全支持：

| 数据集 | 文件名 | 格式配置 | 名称配置 | 任务类型 |
|--------|--------|----------|----------|----------|
| QM9 | qm9_export.pkl | Exported-QM9 | qm9 | 多属性回归 |
| ZINC | zinc_export.pkl | PyG-ZINC | subset | 单属性回归 |
| MOLHIV | molhiv_export.pkl | OGB | ogbg-molhiv | 二分类 |
| AQSOL | aqsol_export.pkl | PyG-AQSOL | aqsol | 单属性回归 |
| COLORS-3 | colors3_export.pkl | PyG-TUDataset | colors3 | 11分类 |
| PROTEINS | proteins_export.pkl | PyG-TUDataset | PROTEINS | 2分类 |
| DD | dd_export.pkl | PyG-TUDataset | DD | 2分类 |
| Mutagenicity | mutagenicity_export.pkl | PyG-TUDataset | mutagenicity | 2分类 |
| COIL-DEL | coildel_export.pkl | PyG-TUDataset | coildel | 100分类 |
| DBLP | dblp_export.pkl | PyG-TUDataset | DBLP | 2分类 |
| TWITTER | twitter_export.pkl | PyG-TUDataset | twitter | 2分类 |
| SYNTHETIC | synthetic_export.pkl | PyG-TUDataset | synthetic | 2分类 |
| Peptides-func | peptides_func_export.pkl | OGB | peptides-functional | 多标签分类 |
| Peptides-struct | peptides_struct_export.pkl | OGB | peptides-structural | 多标签回归 |

**总计**: 14个数据集，409,668个图，100%数据一致性保证。

## 注意事项

1. **路径配置**: 务必将 `exported_data_dir` 设置为您的实际导出数据目录
2. **编码器选择**: 导出数据的特征已经是token格式，建议使用 `LinearNode` 和 `LinearEdge`  
3. **批量大小**: 大数据集（如QM9、TWITTER）可能需要调整批量大小
4. **评估指标**: 不同任务使用不同的最佳指标（accuracy, mae, rocauc, ap等）
5. **数据一致性**: 使用导出数据可确保与您原项目100%一致的实验结果
